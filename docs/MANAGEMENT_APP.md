## Management Web Application

This repository includes a minimal full-stack management interface to monitor and manage the blockchain network and products.

### Overview
- Backend: `apps/server` — Express + Fabric Gateway SDK
- Frontend: `apps/web` — React + Vite
- Org context is chosen in the web UI and sent as header `x-org` (`manufacturer|distributor|retailer`).

### Prerequisites
1. Bring up the Fabric network and create the channel:
   - `./network.sh up`
   - `./network.sh createChannel`
   - `./network.sh deployCC` (install/approve/commit chaincode)
2. Ensure the `organizations/` directory with MSP materials exists at the repo root (generated by the steps above).
3. Node.js 18+ and npm.

### Start Backend API
```
cd apps/server
npm install
npm run dev
```
Default port: `4000`.

Endpoints (send `x-org` header):
- `GET /health`
- `GET /api/monitor/channel` — returns `{ height, currentBlockHash }`
- `GET /api/products`
- `GET /api/products/:id`
- `POST /api/products` — body: `{ productId, name, manufacturer, batchNumber, manufactureDate, expiryDate }`
- `POST /api/products/:id/status` — `{ status, temperature }`
- `POST /api/products/:id/transfer` — `{ newOwner, location }`
- `GET /api/products/:id/history`
- `POST /api/products/:id/counterfeit`

### Start Frontend
```
cd apps/web
npm install
npm run dev
```
Default port: `5173` with proxy to `http://localhost:4000` for `/api` and `/health`.

### Using the App
1. Open `http://localhost:5173`
2. Select the active organization from the header selector.
3. Use Dashboard to view channel height and latest block hash.
4. Use Products to list, create, view, update status, transfer ownership, and mark counterfeit.

### Notes
- The server auto-resolves the repo root to locate MSP materials under `organizations/peerOrganizations/...`.
- For production, secure the API with authentication and enforce MSP/attribute-based access control in chaincode.


